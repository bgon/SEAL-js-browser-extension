(()=>{"use strict";({994:function(){var e=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function r(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,r)}c((o=o.apply(e,n||[])).next())}))};chrome.runtime.onInstalled.addListener((function(e){"install"===e.reason?(console.debug("This is a first-time install!"),chrome.storage.local.set({autoScan:!1})):"update"===e.reason?console.debug("The extension has been updated to version:",chrome.runtime.getManifest().version):"chrome_update"===e.reason&&console.debug("Chrome has been updated."),chrome.contextMenus.create({id:"viewMediaSignature",title:"View media signature",contexts:["audio","image","video"],documentUrlPatterns:["<all_urls>"]})})),chrome.contextMenus.onClicked.addListener(((e,n)=>{const t=e.srcUrl;if(null==t)return;const o={action:"viewMediaSignature",url:t};null!=(null==n?void 0:n.id)&&chrome.tabs.sendMessage(n.id,o)})),chrome.runtime.onMessage.addListener(((n,t,o)=>e(void 0,void 0,void 0,(function*(){if(console.log("message opentab",n),"openTab"===n.action){console.log("Message received:",n);let e=yield chrome.tabs.create({url:n.imageSrc,active:!1}),t=e.id;console.log("tab",e),chrome.tabs.onUpdated.addListener(((e,o,a)=>{t==e&&"complete"===o.status&&(console.log("Tab loaded:",a.url),n={action:"viewMediaSignature",url:n.imageSrc},chrome.tabs.sendMessage(t,n))})),o({response:"tab opened"})}}))))}})[994]()})();